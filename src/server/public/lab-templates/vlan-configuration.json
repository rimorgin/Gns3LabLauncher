{
  "title": "VLAN Configuration and Management",
  "description": "Configure VLANs, trunk ports, and inter-VLAN routing on Cisco switches with hands-on practice",
  "category": "Switching",
  "difficulty": "INTERMEDIATE",
  "estimatedTime": 120,
  "tags": ["vlan", "switching", "trunking", "inter-vlan", "stp"],
  "thumbnail": "/templates/vlan-config.png",
  "objectives": [
    "Create and configure VLANs on Cisco switches",
    "Configure trunk and access ports appropriately",
    "Implement inter-VLAN routing using a router-on-a-stick",
    "Verify VLAN operations and troubleshoot common issues",
    "Understand VLAN security best practices"
  ],
  "prerequisites": [
    "Basic switch configuration knowledge",
    "Understanding of VLANs and their purpose",
    "Familiarity with Cisco IOS commands",
    "Knowledge of Ethernet frame structure"
  ],
  "environment": {
    "type": "GNS3",
    "topology": {
      "nodes": [
        {
          "name": "Switch1",
          "type": "switch",
          "x": 200,
          "y": 150,
          "icon": "switch",
          "status": "stopped"
        },
        {
          "name": "Switch2",
          "type": "switch",
          "x": 500,
          "y": 150,
          "icon": "switch",
          "status": "stopped"
        },
        {
          "name": "Router1",
          "type": "router",
          "x": 350,
          "y": 50,
          "icon": "router",
          "status": "stopped"
        },
        {
          "name": "PC1-Sales",
          "type": "pc",
          "x": 100,
          "y": 250,
          "icon": "pc",
          "status": "stopped"
        },
        {
          "name": "PC2-Engineering",
          "type": "pc",
          "x": 300,
          "y": 250,
          "icon": "pc",
          "status": "stopped"
        },
        {
          "name": "PC3-Sales",
          "type": "pc",
          "x": 600,
          "y": 250,
          "icon": "pc",
          "status": "stopped"
        }
      ],
      "links": [
        {
          "source": "pc1",
          "target": "sw1",
          "sourcePort": "eth0",
          "targetPort": "f0/1",
          "status": "down"
        },
        {
          "source": "pc2",
          "target": "sw1",
          "sourcePort": "eth0",
          "targetPort": "f0/2",
          "status": "down"
        },
        {
          "source": "sw1",
          "target": "sw2",
          "sourcePort": "f0/24",
          "targetPort": "f0/24",
          "status": "down"
        },
        {
          "source": "sw2",
          "target": "pc3",
          "sourcePort": "f0/1",
          "targetPort": "eth0",
          "status": "down"
        },
        {
          "source": "sw1",
          "target": "r1",
          "sourcePort": "f0/23",
          "targetPort": "g0/0",
          "status": "down"
        }
      ],
      "layout": {
        "width": 800,
        "height": 350
      }
    },
    "devices": [
      {
        "name": "Switch1",
        "type": "Cisco 2960",
        "credentials": {
          "username": "admin",
          "password": "cisco"
        },
        "interfaces": [
          {
            "name": "FastEthernet0/1",
            "enabled": false,
            "status": "down"
          },
          {
            "name": "FastEthernet0/2",
            "enabled": false,
            "status": "down"
          },
          {
            "name": "FastEthernet0/23",
            "enabled": false,
            "status": "down"
          },
          {
            "name": "FastEthernet0/24",
            "enabled": false,
            "status": "down"
          }
        ]
      },
      {
        "name": "Switch2",
        "type": "Cisco 2960",
        "credentials": {
          "username": "admin",
          "password": "cisco"
        },
        "interfaces": [
          {
            "name": "FastEthernet0/1",
            "enabled": false,
            "status": "down"
          },
          {
            "name": "FastEthernet0/24",
            "enabled": false,
            "status": "down"
          }
        ]
      },
      {
        "name": "Router1",
        "type": "Cisco 2901",
        "credentials": {
          "username": "admin",
          "password": "cisco"
        },
        "interfaces": [
          {
            "name": "GigabitEthernet0/0",
            "enabled": false,
            "status": "down"
          }
        ]
      },
      {
        "name": "PC1-Sales",
        "type": "Virtual PC",
        "ipAddress": "192.168.10.10",
        "interfaces": [
          {
            "name": "eth0",
            "ipAddress": "192.168.10.10",
            "subnet": "255.255.255.0",
            "enabled": true,
            "status": "down"
          }
        ]
      },
      {
        "name": "PC2-Engineering",
        "type": "Virtual PC",
        "ipAddress": "192.168.20.10",
        "interfaces": [
          {
            "name": "eth0",
            "ipAddress": "192.168.20.10",
            "subnet": "255.255.255.0",
            "enabled": true,
            "status": "down"
          }
        ]
      },
      {
        "name": "PC3-Sales",
        "type": "Virtual PC",
        "ipAddress": "192.168.10.20",
        "interfaces": [
          {
            "name": "eth0",
            "ipAddress": "192.168.10.20",
            "subnet": "255.255.255.0",
            "enabled": true,
            "status": "down"
          }
        ]
      }
    ]
  },
  "guide": {
    "sections": [
      {
        "title": "Introduction to VLANs",
        "type": "introduction",
        "order": 1,
        "estimatedTime": 20,
        "content": [
          {
            "type": "text",
            "content": "Virtual Local Area Networks (VLANs) allow you to segment a physical network into multiple logical networks. This lab will teach you how to create VLANs, configure switch ports, and enable communication between VLANs using inter-VLAN routing."
          },
          {
            "type": "callout",
            "content": "VLANs provide improved security, better traffic management, simplified administration, and cost savings by reducing the need for physical network segmentation.",
            "metadata": {
              "callout_type": "info"
            }
          },
          {
            "type": "text",
            "content": "In this lab, we'll create two VLANs: VLAN 10 for Sales department and VLAN 20 for Engineering department. We'll configure switch ports as access and trunk ports, and set up inter-VLAN routing."
          }
        ],
        "tasks": [],
        "verification": [],
        "hints": []
      },
      {
        "title": "Creating VLANs",
        "type": "step",
        "order": 2,
        "estimatedTime": 25,
        "content": [
          {
            "type": "text",
            "content": "First, we'll create VLANs on both switches. VLANs are created in global configuration mode and should be created on all switches in the network."
          },
          {
            "type": "code",
            "content": "Switch1> enable\nSwitch1# configure terminal\nSwitch1(config)# vlan 10\nSwitch1(config-vlan)# name Sales\nSwitch1(config-vlan)# exit\nSwitch1(config)# vlan 20\nSwitch1(config-vlan)# name Engineering\nSwitch1(config-vlan)# exit",
            "metadata": {
              "language": "cisco",
              "device": "Switch1"
            }
          },
          {
            "type": "text",
            "content": "After creating VLANs, we can verify them using the show vlan command. This displays all VLANs, their names, status, and assigned ports."
          }
        ],
        "tasks": [
          {
            "description": "Create VLAN 10 with name 'Sales' on Switch1",
            "device": "Switch1",
            "commands": [
              "enable",
              "configure terminal",
              "vlan 10",
              "name Sales",
              "exit"
            ],
            "expectedResult": "VLAN 10 should be created with name Sales",
            "isCompleted": false,
            "hints": ["Use 'vlan 10' to create VLAN 10", "Use 'name Sales'"]
          },
          {
            "description": "Create VLAN 20 with name 'Engineering' on Switch1",
            "device": "Switch1",
            "commands": ["vlan 20", "name Engineering", "exit"],
            "expectedResult": "VLAN 20 should be created with name Engineering",
            "isCompleted": false,
            "hints": [
              "VLAN names help with network documentation",
              "Exit VLAN configuration mode when done"
            ]
          },
          {
            "description": "Create the same VLANs on Switch2",
            "device": "Switch2",
            "commands": [
              "enable",
              "configure terminal",
              "vlan 10",
              "name Sales",
              "exit",
              "vlan 20",
              "name Engineering",
              "exit"
            ],
            "expectedResult": "Both VLANs should exist on Switch2",
            "isCompleted": false,
            "hints": [
              "VLANs must be created on all switches",
              "Consistent naming is important"
            ]
          }
        ],
        "verification": [
          {
            "description": "Verify VLANs are created on Switch1",
            "command": "show vlan brief",
            "expectedOutput": "10   Sales                         active",
            "device": "Switch1",
            "isCompleted": false
          },
          {
            "description": "Verify VLANs are created on Switch2",
            "command": "show vlan brief",
            "expectedOutput": "20   Engineering                  active",
            "device": "Switch2",
            "isCompleted": false
          }
        ],
        "hints": [
          "VLANs are stored in vlan.dat file",
          "Use 'show vlan brief' for a summary view"
        ]
      },
      {
        "title": "Configuring Access Ports",
        "type": "step",
        "order": 3,
        "estimatedTime": 30,
        "content": [
          {
            "type": "text",
            "content": "Access ports connect end devices (like PCs) to a specific VLAN. Each access port belongs to only one VLAN and removes VLAN tags from frames before sending them to the connected device."
          },
          {
            "type": "code",
            "content": "Switch1(config)# interface fastethernet 0/1\nSwitch1(config-if)# switchport mode access\nSwitch1(config-if)# switchport access vlan 10\nSwitch1(config-if)# description PC1-Sales\nSwitch1(config-if)# exit",
            "metadata": {
              "language": "cisco",
              "device": "Switch1"
            }
          },
          {
            "type": "text",
            "content": "The 'switchport mode access' command configures the port as an access port, and 'switchport access vlan 10' assigns it to VLAN 10. The description helps with documentation."
          }
        ],
        "tasks": [
          {
            "description": "Configure FastEthernet0/1 on Switch1 as access port for VLAN 10",
            "device": "Switch1",
            "commands": [
              "interface fastethernet 0/1",
              "switchport mode access",
              "switchport access vlan 10",
              "description PC1-Sales"
            ],
            "expectedResult": "Port should be configured as access port in VLAN 10",
            "isCompleted": false,
            "hints": [
              "Access ports connect end devices to VLANs",
              "Use descriptive port descriptions"
            ]
          },
          {
            "description": "Configure FastEthernet0/2 on Switch1 as access port for VLAN 20",
            "device": "Switch1",
            "commands": [
              "interface fastethernet 0/2",
              "switchport mode access",
              "switchport access vlan 20",
              "description PC2-Engineering"
            ],
            "expectedResult": "Port should be configured as access port in VLAN 20",
            "isCompleted": false,
            "hints": [
              "Each access port belongs to one VLAN",
              "Port descriptions aid in troubleshooting"
            ]
          },
          {
            "description": "Configure FastEthernet0/1 on Switch2 as access port for VLAN 10",
            "device": "Switch2",
            "commands": [
              "interface fastethernet 0/1",
              "switchport mode access",
              "switchport access vlan 10",
              "description PC3-Sales"
            ],
            "expectedResult": "Port should be configured as access port in VLAN 10",
            "isCompleted": false,
            "hints": [
              "PC3 is also in the Sales department (VLAN 10)",
              "Consistent configuration across switches is important"
            ]
          }
        ],
        "verification": [
          {
            "description": "Verify access port configuration on Switch1",
            "command": "show vlan brief",
            "expectedOutput": "10   Sales                         active    Fa0/1",
            "device": "Switch1",
            "isCompleted": false
          },
          {
            "description": "Check interface switchport status",
            "command": "show interfaces fastethernet 0/1 switchport",
            "expectedOutput": "Administrative Mode: static access",
            "device": "Switch1",
            "isCompleted": false
          }
        ],
        "hints": [
          "Access ports are untagged ports",
          "Use 'show vlan brief' to see port assignments"
        ]
      },
      {
        "title": "Configuring Trunk Ports",
        "type": "step",
        "order": 4,
        "estimatedTime": 25,
        "content": [
          {
            "type": "text",
            "content": "Trunk ports carry traffic for multiple VLANs between switches. They use VLAN tagging (802.1Q) to identify which VLAN each frame belongs to."
          },
          {
            "type": "code",
            "content": "Switch1(config)# interface fastethernet 0/24\nSwitch1(config-if)# switchport mode trunk\nSwitch1(config-if)# switchport trunk allowed vlan 10,20\nSwitch1(config-if)# description Trunk to Switch2\nSwitch1(config-if)# exit",
            "metadata": {
              "language": "cisco",
              "device": "Switch1"
            }
          },
          {
            "type": "callout",
            "content": "For security, it's best practice to explicitly specify which VLANs are allowed on trunk ports rather than allowing all VLANs.",
            "metadata": {
              "callout_type": "tip"
            }
          }
        ],
        "tasks": [
          {
            "description": "Configure FastEthernet0/24 on Switch1 as trunk port",
            "device": "Switch1",
            "commands": [
              "interface fastethernet 0/24",
              "switchport mode trunk",
              "switchport trunk allowed vlan 10,20",
              "description Trunk to Switch2"
            ],
            "expectedResult": "Port should be configured as trunk allowing VLANs 10 and 20",
            "isCompleted": false,
            "hints": [
              "Trunk ports connect switches together",
              "Specify allowed VLANs for security"
            ]
          },
          {
            "description": "Configure FastEthernet0/24 on Switch2 as trunk port",
            "device": "Switch2",
            "commands": [
              "interface fastethernet 0/24",
              "switchport mode trunk",
              "switchport trunk allowed vlan 10,20",
              "description Trunk to Switch1"
            ],
            "expectedResult": "Trunk should be configured on both ends",
            "isCompleted": false,
            "hints": [
              "Both ends of a trunk must be configured",
              "Use consistent VLAN allowlists"
            ]
          }
        ],
        "verification": [
          {
            "description": "Verify trunk configuration",
            "command": "show interfaces trunk",
            "expectedOutput": "Fa0/24         802.1q         trunking      10,20",
            "device": "Switch1",
            "isCompleted": false
          },
          {
            "description": "Check trunk status on Switch2",
            "command": "show interfaces fastethernet 0/24 switchport",
            "expectedOutput": "Administrative Mode: trunk",
            "device": "Switch2",
            "isCompleted": false
          }
        ],
        "hints": [
          "Trunk ports use 802.1Q tagging",
          "Both switches must agree on trunk configuration"
        ]
      },
      {
        "title": "Inter-VLAN Routing Configuration",
        "type": "step",
        "order": 5,
        "estimatedTime": 30,
        "content": [
          {
            "type": "text",
            "content": "By default, VLANs cannot communicate with each other. Inter-VLAN routing using a router-on-a-stick configuration allows controlled communication between VLANs."
          },
          {
            "type": "code",
            "content": "Router1(config)# interface gigabitethernet 0/0\nRouter1(config-if)# no shutdown\nRouter1(config-if)# exit\nRouter1(config)# interface gigabitethernet 0/0.10\nRouter1(config-subif)# encapsulation dot1q 10\nRouter1(config-subif)# ip address 192.168.10.1 255.255.255.0\nRouter1(config-subif)# exit\nRouter1(config)# interface gigabitethernet 0/0.20\nRouter1(config-subif)# encapsulation dot1q 20\nRouter1(config-subif)# ip address 192.168.20.1 255.255.255.0",
            "metadata": {
              "language": "cisco",
              "device": "Router1"
            }
          },
          {
            "type": "text",
            "content": "We also need to configure the switch port connected to the router as a trunk port to carry both VLANs."
          }
        ],
        "tasks": [
          {
            "description": "Configure router subinterfaces for inter-VLAN routing",
            "device": "Router1",
            "commands": [
              "enable",
              "configure terminal",
              "interface gigabitethernet 0/0",
              "no shutdown",
              "exit",
              "interface gigabitethernet 0/0.10",
              "encapsulation dot1q 10",
              "ip address 192.168.10.1 255.255.255.0",
              "exit",
              "interface gigabitethernet 0/0.20",
              "encapsulation dot1q 20",
              "ip address 192.168.20.1 255.255.255.0"
            ],
            "expectedResult": "Subinterfaces should be configured for both VLANs",
            "isCompleted": false,
            "hints": [
              "Subinterfaces enable router-on-a-stick",
              "Each VLAN needs its own subinterface"
            ]
          },
          {
            "description": "Configure Switch1 port to router as trunk",
            "device": "Switch1",
            "commands": [
              "interface fastethernet 0/23",
              "switchport mode trunk",
              "switchport trunk allowed vlan 10,20",
              "description Trunk to Router1"
            ],
            "expectedResult": "Port to router should be configured as trunk",
            "isCompleted": false,
            "hints": [
              "Router connection needs to be a trunk",
              "Allow both VLANs on the trunk"
            ]
          }
        ],
        "verification": [
          {
            "description": "Verify router subinterfaces",
            "command": "show ip interface brief",
            "expectedOutput": "GigabitEthernet0/0.10   192.168.10.1    YES manual up                    up",
            "device": "Router1",
            "isCompleted": false
          },
          {
            "description": "Test inter-VLAN connectivity",
            "command": "ping 192.168.20.10",
            "expectedOutput": "Success rate is 100 percent",
            "device": "PC1-Sales",
            "isCompleted": false
          }
        ],
        "hints": [
          "Router acts as default gateway for each VLAN",
          "Test connectivity between different VLANs"
        ]
      }
    ],
    "currentSection": 0,
    "completedSections": []
  },
  "resources": [
    {
      "title": "VLAN Command Reference",
      "type": "cheat_sheet",
      "url": "/resources/vlan-commands.pdf",
      "description": "Quick reference for VLAN configuration commands"
    },
    {
      "title": "802.1Q Trunking Guide",
      "type": "documentation",
      "url": "/resources/trunking-guide.pdf",
      "description": "Detailed explanation of VLAN trunking and 802.1Q protocol"
    },
    {
      "title": "Inter-VLAN Routing Methods",
      "type": "reference",
      "url": "/resources/inter-vlan-routing.pdf",
      "description": "Comparison of different inter-VLAN routing methods"
    }
  ]
}
